{% extends "base.html" %}
{% block title %}Manage Your Band{% endblock %}
{% block content %}
<br/> 
{% if band.user_id_admin == user.id %}
  <h1 align="center">{{band.name}} - You are admin this music band!</h1>
{% else %}
  <h1 align="center">{{band.name}} - You are a member of a music band!</h1>
{% endif %}
<br><br/>
<div class="row">
    <div class="col-3">
      <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical"  style="font-size: 22px;">
        <a class="nav-link active" id="v-pills-members-tab" data-toggle="pill" href="#v-pills-members" role="tab" aria-controls="v-pills-home" aria-selected="true">Members</a>
        <a class="nav-link" id="v-pills-orders-tab" data-toggle="pill" href="#v-pills-orders" role="tab" aria-controls="v-pills-orders" aria-selected="false">Orders</a>
        <a class="nav-link" id="v-pills-wallet-tab" data-toggle="pill" href="#v-pills-wallet" role="tab" aria-controls="v-pills-wallet" aria-selected="false">Wallet</a>
        <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Messages</a>
        <a class="nav-link" id="v-pills-songbook-tab" data-toggle="pill" href="#v-pills-songbook" role="tab" aria-controls="v-pills-songbook" aria-selected="false">SongBook</a>
        <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false">Settings</a>
      </div>
    </div>
    <div class="col-9">
      <div class="tab-content" id="v-pills-tabContent" >
        <div class="tab-pane fade show active" id="v-pills-members" role="tabpanel" aria-labelledby="v-pills-members-tab">
            <table class="table">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name </th>
                    <th scope="col">Email</th>
                    <th scope="col">Telephone Number</th>
                    <th scope="col">Instrument</th>
                  </tr>
                </thead>
                <tbody>
                {% for i, user in users_in_this_band %} 
                  <tr>
                    <th scope="row">{{i}}</th>
                    <td>{{user.first_name}}</td>
                    <td>{{user.surname}}</td>
                    <td>{{user.email}}</td>
                    <td>{{user.telephone_number}}</td>
                    <td>{{user.instrument}}</td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>

              {% if band.user_id_admin == user.id %}
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addNewMembersModal">
                  Add New Members
                </button>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#deleteMembersModal" style="float:right;">
                  Delete Members
                </button>
              {% else %}
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addNewMembersModal" disabled>
                  Add New Members
                </button>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#deleteMembersModal" style="float:right;" disabled>
                  Delete Members
                </button>
              {% endif %}

                

              <div class="modal fade" id="addNewMembersModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Add New Member</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {% for user_without_band in users_without_band %}
                      <form method="POST" action="/manage-your-band/add/{{user_without_band.id}}">
                      <button type="submit" value=user_without_band.id class="btn btn-info" style="margin-bottom: 10px;">
                        {{user_without_band.first_name}} {{user_without_band.surname}}, {{user_without_band.instrument}}
                      </button>
                      <br/>
                      </form>
                      {% endfor %}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="modal fade" id="deleteMembersModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Delete Member</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {% for _, user_in_this_band in users_in_this_band %}
                      <form method="POST" action="/manage-your-band/delete/{{user_in_this_band.id}}">
                      <button type="submit" value=user_in_this_band.id class="btn btn-info" style="margin-bottom: 10px;">
                        {{user_in_this_band.first_name}} {{user_in_this_band.surname}}, {{user_in_this_band.instrument}}
                      </button>
                      <br/>
                      </form>
                      {% endfor %}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>

        </div>
        <div class="tab-pane fade" id="v-pills-orders" role="tabpanel" aria-labelledby="v-pills-orders-tab">
            
        </div>
        <div class="tab-pane fade" id="v-pills-wallet" role="tabpanel" aria-labelledby="v-pills-wallet-tab">
            
        </div>
        <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
            
        </div>
        <div class="tab-pane fade" id="v-pills-songbook" role="tabpanel" aria-labelledby="v-pills-songbook-tab">
            
        </div>
        <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
            
        </div>
      </div>
    </div>
  </div>
{% endblock %}